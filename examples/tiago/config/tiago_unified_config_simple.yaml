# TIAGo Robot Configuration - Unified Format (Simplified for Testing)
# Configuration for PAL Robotics TIAGo mobile manipulator robot

# TIAGo-specific robot configuration
robot:
  name: "tiago"
  description: "PAL Robotics TIAGo mobile manipulator robot"
  
  properties:
    # TIAGo joint configuration (torso + arm)
    joints:
      active_joints: [
        "torso_lift_joint",
        "arm_1_joint", "arm_2_joint", "arm_3_joint", "arm_4_joint",
        "arm_5_joint", "arm_6_joint", "arm_7_joint"
      ]
      joint_limits:
        position: [-1.57, 1.57, -1.57, 1.57, -1.57, 1.57, -1.57, 1.57, -1.57, 1.57, -1.57, 1.57, -1.57, 1.57, -1.57, 1.57]
        velocity: [0.05009095, 0.05009095, 0.07504916, 0.0715585, 0.05585054, 0.12217305, 0.05585054, 0.12217305]
        acceleration: [20.0, 20.0, 20.0, 20.0, 20.0, 20.0, 20.0, 20.0]
        torque: [4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0]
    
    # TIAGo mechanical properties
    mechanics:
      reduction_ratios: [32.0, 32.0, 45.0, -48.0, 45.0, 32.0]
      ratio_essential: 30.0
      friction_coefficients:
        viscous: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        static: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      actuator_inertias: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      joint_offsets: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    
    # TIAGo has coupled wrist
    coupling:
      has_coupled_wrist: true
      Iam6: 0
      fvm6: 0
      fsm6: 0
      
    # Mobile base properties
    mobility:
      has_mobile_base: true
      base_type: "differential_drive"

# TIAGo task configurations
tasks:
  calibration:
    enabled: true
    type: kinematic_calibration
    
    parameters:
      calibration_level: "full_params"
      include_non_geometric: false
      regularization_coefficient: 0.01
      outlier_threshold: 0.05  # 5cm outlier threshold
      
    kinematics:
      base_frame: "universe"
      tool_frame: "wrist_ft_tool_link"
      
    measurements:
      markers:
        - name: "arm_marker"
          reference_joint: "arm_7_joint"
          measurable_dof: [true, true, true, false, false, false]
          sensor_type: "mocap"
          
      poses:
        base_pose: [0.0908, 0.08, 0.0, -1.57, 0.0, 0.0]
        tool_pose: [0.2163, 0.03484, 0.004, 0.0, -1.57, -1.57]
    
    data:
      source_file: "data/calibration/mocap/qualysis_base_hand_calibration.csv"
      sample_configurations_file: "data/optimal_configs/eye_hand_calibration_tiago_hey5_100.yaml"
      number_of_samples: 500

  identification:
    enabled: true
    type: dynamic_identification
    
    problem:
      include_external_forces: false
      use_joint_torques: true
      
      model_components:
        friction: true
        joint_offset: true
        actuator_inertia: true
        static_regressor: true
        inertia_regressor: true
        has_coupled_wrist: true
        
      active_joints: [
        "torso_lift_joint",
        "arm_1_joint", "arm_2_joint", "arm_3_joint", "arm_4_joint",
        "arm_5_joint", "arm_6_joint", "arm_7_joint"
      ]
        
    signal_processing:
      sampling_frequency: 5000.0  # Hz (1/0.0002)
      cutoff_frequency: 100.0     # Hz
      filter_type: "butterworth"
      filter_order: 4
      
    trajectory:
      waypoints: 3
      frequency: 50  # Hz
      time_window: 1.5  # seconds
      soft_limits: 0.1
      max_attempts: 500
      
    load_estimation:
      mass_load: 0.0
      body_loaded: 0.0
      sync_joint_motion: false

# Environment settings
environment:
  gravity: [0, 0, -9.81]
  temperature: 22.0

# Custom properties
custom:
  manufacturer: "PAL Robotics"
  model_series: "TIAGo"
